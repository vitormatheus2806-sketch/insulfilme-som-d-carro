<script>
  document.addEventListener("DOMContentLoaded", () => {

    const angleNames = { lat: "Lateral", int: "Interno" };

    const toneNames = {
      sem: "Sem Insulfilm",
      lei: "Dentro da Lei",
      g520: "G5/20",
      g5: "G5",
      g20: "G20",
      g35: "G35"
    };

    let currentAngle = "lat";
    let currentTone  = "sem";

    const splash = document.getElementById("splash");
    const app = document.getElementById("app");

    const btnEnter = document.getElementById("btnEnter");
    const btnHome = document.getElementById("btnHome");

    const imgMain = document.getElementById("imgMain");
    const imgWrap = document.getElementById("imgWrap");

    const txtAngulo = document.getElementById("txtAngulo");
    const txtTonalidade = document.getElementById("txtTonalidade");

    function playZoom(){
      imgWrap.classList.remove("zoom");
      void imgWrap.offsetWidth;
      imgWrap.classList.add("zoom");
    }

    function updateImage(){
      const file = imagens/${currentAngle}_${currentTone}.png;

      imgMain.classList.add("fadeOut");

      setTimeout(()=>{
        imgMain.src = file;

        txtAngulo.textContent = Ângulo: ${angleNames[currentAngle]};
        txtTonalidade.textContent = Tonalidade: ${toneNames[currentTone]};

        playZoom();
      }, 120);
    }

    imgMain.addEventListener("load", ()=>{
      imgMain.classList.remove("fadeOut");
    });

    btnEnter.addEventListener("click", () => {
      splash.style.display = "none";
      app.style.display = "block";
      updateImage();
      window.scrollTo(0, 0);
    });

    btnHome.addEventListener("click", () => {
      app.style.display = "none";
      splash.style.display = "flex";
      window.scrollTo(0, 0);
    });

    document.querySelectorAll("#rowAngulos button").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("#rowAngulos button").forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");

        currentAngle = btn.dataset.ang;
        updateImage();
      });
    });

    document.querySelectorAll("#rowTonalidades button").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("#rowTonalidades button").forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");

        currentTone = btn.dataset.ton;
        updateImage();
      });
    });

    console.log("✅ Script carregado!");
  });
</script>
